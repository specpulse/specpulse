description = "Initialize a new feature with SpecPulse framework (SDD compliant)"
prompt = """
Initialize a new SpecPulse feature following Specification-Driven Development (SDD) principles.

## CRITICAL: LLM Workflow Rules

**PRIMARY WORKFLOW: Use CLI when available**
- Always prefer `specpulse feature init` CLI command first
- Use Bash tool ONLY for CLI commands, not for file editing
- Only use Read/Write/Edit tools when CLI doesn't provide functionality

**PROTECTED DIRECTORIES (NEVER EDIT):**
- templates/ - Template files
- .specpulse/ - Internal config
- specpulse/ - Package code
- .claude/ and .gemini/ - AI configuration

**ALLOWED DIRECT EDITS (When NO CLI exists):**
- specs/ - Feature specifications (create/edit spec files)
- plans/ - Implementation plans (create/edit plan files)
- tasks/ - Task breakdowns (create/edit task files)
- memory/ - Project context (update context.md, decisions.md)

## Command: /sp-pulse {{args}}

When called, perform the following steps:

1. **Validate arguments** and extract feature name + optional ID
   - Feature name: first argument
   - Optional ID: second argument (if provided)
   - Sanitize feature name (alphanumeric, hyphens only)

2. **Try CLI first (if feature init exists)**:
   !{bash specpulse feature init {{feature_name}}}

   If this succeeds, STOP HERE. CLI handles everything.

3. **If CLI doesn't exist, use File Operations**:
   - Generate feature ID (001, 002, etc.) or use provided ID
   - Create sanitized branch name: ID-feature-name
   - Create directories: specs/ID-feature/, plans/ID-feature/, tasks/ID-feature/
   - Copy AI-optimized templates to feature directories
   - Update memory/context.md with current feature metadata
   - Create and switch to git branch if in git repository

4. **Suggest specification creation**:
   - Provide user with 2-3 AI-generated specification suggestions
   - Ask user to choose one or create custom specification
   - Guide user to use /sp-spec command after making selection
   - Example suggestions for "user-authentication":
     1. "User authentication with OAuth2 providers and JWT tokens"
     2. "Complete authentication system including registration, login, and profile management"
     3. "OAuth2 integration with social login providers"

5. **Validate structure** and report comprehensive status:
   - Feature ID: 001
   - Branch name: 001-user-authentication
   - Created paths: specs/001-user-authentication/, plans/001-user-authentication/, tasks/001-user-authentication/
   - Status: ready_for_spec
   - Next step: Use /sp-spec to create specification

## SDD Compliance Checklist
- [ ] Feature name is clear and specific (Principle 1)
- [ ] Structure supports specifications (Principle 1)
- [ ] Templates ready for iterative work (Principle 2)
- [ ] Supports any project type (Universal framework)

## Error Handling
- Feature name sanitization
- Directory creation validation
- Template existence verification
- Git repository validation
- Context file management

## Manual Workflow
After /sp-pulse, the workflow continues:
1. **Phase -1**: MANUAL - Use /sp-spec to create specification
2. **Phase 0**: MANUAL - Use /sp-plan to generate plan
3. **Phase 1**: MANUAL - Use /sp-task to create tasks
4. **Implementation**: Begin development following SDD

## Context Detection
The system automatically detects current feature from:
- memory/context.md for current feature
- Git branch name if available
- Most recently created feature directory
- Explicit specification in commands

## Multi-Feature Support
- Track multiple features simultaneously
- Switch context between features
- List all features with /sp-status
- Continue work with /sp-continue feature-name

Example usage: /sp-pulse user-authentication-oauth2
"""