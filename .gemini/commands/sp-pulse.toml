description = "Initialize a new feature with SpecPulse framework (SDD compliant)"
prompt = """
Initialize a new SpecPulse feature following Specification-Driven Development (SDD) principles.

## CRITICAL: LLM Workflow Rules (v2.1.3+)

**PRIMARY WORKFLOW: Use CLI FIRST**
- Use `specpulse sp-pulse init <feature-name>` as PRIMARY method
- CLI handles metadata, validation, and file structure automatically
- Use File Operations ONLY if CLI fails or doesn't exist

**PROTECTED DIRECTORIES (NEVER EDIT):**
- .specpulse/templates/ - Template files
- .specpulse/ - Internal config
- specpulse/ - Package code
- .claude/ and .gemini/ - AI configuration

**ALLOWED DIRECT EDITS (When NO CLI exists):**
- .specpulse/.specpulse/specs/ - Feature specifications (create/edit spec files)
- .specpulse/.specpulse/plans/ - Implementation plans (create/edit plan files)
- .specpulse/.specpulse/tasks/ - Task breakdowns (create/edit task files)
- .specpulse/memory/ - Project context (update context.md, decisions.md)

## Command: /sp-pulse {{args}}

When called, perform the following steps:

1. **Validate arguments** and extract feature name + optional ID
   - Feature name: first argument
   - Optional ID: second argument (if provided)
   - Sanitize feature name (alphanumeric, hyphens only)

2. **Use CLI Command (PRIMARY - v2.1.3+)**:
   !{bash specpulse sp-pulse init {{feature_name}}}

   This is the PRIMARY method. Use this FIRST.
   CLI creates directories, updates context, creates git branch.

3. **If CLI fails or doesn't exist, use File Operations (FALLBACK)**:
   - Generate feature ID (001, 002, etc.) or use provided ID
   - Create sanitized branch name: ID-feature-name
   - Create directories: .specpulse/.specpulse/specs/ID-feature/, .specpulse/.specpulse/plans/ID-feature/, .specpulse/.specpulse/tasks/ID-feature/
   - Copy AI-optimized templates to feature directories
   - Update .specpulse/memory/context.md with current feature metadata
   - Create and switch to git branch if in git repository

4. **Intelligent specification suggestions**:
   - Analyze feature name to infer project type and complexity
   - Generate 3 context-aware specification suggestions:
     1. **Core specification** (2-4 hours development time): Essential functionality only
     2. **Standard specification** (8-12 hours development time): Comprehensive with detailed requirements
     3. **Complete specification** (16-24 hours development time): Full-featured solution with advanced aspects
   - Include project type detection and complexity assessment
   - Guide user to /sp-spec command after selection

5. **Validate structure** and report comprehensive status:
   - Feature ID: 001
   - Branch name: 001-user-authentication
   - Created paths: .specpulse/.specpulse/specs/001-user-authentication/, .specpulse/.specpulse/plans/001-user-authentication/, .specpulse/.specpulse/tasks/001-user-authentication/
   - Status: ready_for_spec
   - Next step: Use /sp-spec to create specification

## SDD Compliance Checklist
- [ ] Feature name is clear and specific (Principle 1)
- [ ] Structure supports specifications (Principle 1)
- [ ] Templates ready for iterative work (Principle 2)
- [ ] Supports any project type (Universal framework)

## Error Handling
- Feature name sanitization
- Directory creation validation
- Template existence verification
- Git repository validation
- Context file management

## Manual Workflow
After /sp-pulse, the workflow continues:
1. **Phase -1**: MANUAL - Use /sp-spec to create specification
2. **Phase 0**: MANUAL - Use /sp-plan to generate plan
3. **Phase 1**: MANUAL - Use /sp-task to create tasks
4. **Implementation**: Begin development following SDD

## Context Detection
The system automatically detects current feature from:
- .specpulse/memory/context.md for current feature
- Git branch name if available
- Most recently created feature directory
- Explicit specification in commands

## Multi-Feature Support
- Track multiple features simultaneously
- Switch context between features
- List all features with /sp-status
- Continue work with /sp-continue feature-name

Example usage: /sp-pulse user-authentication-oauth2
"""