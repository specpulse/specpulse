description = "Initialize a new feature with SpecPulse framework using SDD methodology"

prompt = """
<!-- SPECPULSE:START -->
**Guardrails**
- CLI-first approach: Always try SpecPulse CLI commands before file operations
- Keep changes tightly scoped to the feature initialization outcome
- Only edit files in specs/, plans/, tasks/, memory/ directories - NEVER modify templates/ or internal config

**Critical Rules**
- **PRIMARY**: Use `specpulse feature init <feature-name>` when available
- **FALLBACK**: File Operations only if CLI fails
- **PROTECTED DIRECTORIES**: templates/, .specpulse/, specpulse/, .claude/, .gemini/, .windsurf/, .cursor/, .github/, .opencode/, .crush/, .qwen/
- **EDITABLE ONLY**: specs/, plans/, tasks/, memory/

**Steps**
Track these steps as TODOs and complete them one by one.

1. **Parse arguments** to extract feature name and options
2. **Try CLI first**:
   - Run `specpulse feature init <feature-name>`
   - If this succeeds, STOP HERE. CLI handles everything.
3. **If CLI doesn't exist, use File Operations**:
   - **Step 1: Determine Feature ID**
     - Read specs/ directory (list subdirectories)
     - Find highest number (e.g., 001, 002) and increment
     - Or use 001 if no features exist
   - **Step 2: Create Feature Structure**
     ```bash
     mkdir -p specs/001-feature-name
     mkdir -p plans/001-feature-name
     mkdir -p tasks/001-feature-name
     ```
   - **Step 3: Update Context and Git**
     - Update memory/context.md with new feature
     - Create git branch: `git checkout -b 001-feature-name`
4. **Comprehensive feature setup**:
   - Generate initial feature documentation
   - Create feature specification template
   - Set up initial planning structure
   - Configure task tracking framework

**Reference**
- Use `specpulse feature init --help` for additional CLI options
- Continue with `spec` for specification creation
- Run `specpulse doctor` if you encounter system issues
<!-- SPECPULSE:END -->
"""